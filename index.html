<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pour Miss Plantard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå∑</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Poiret+One&display=swap" rel="stylesheet">
    <style>
        :root {
            --anthracite: #333333;
            --glass-oui: rgba(255, 77, 109, 0.4);
            --glass-non: rgba(255, 255, 255, 0.3);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #fdf5e6;
            font-family: 'Poiret One', cursive;
            overflow: hidden;
            touch-action: none;
        }

        h1 {
            position: absolute; width: 100%; top: 10%;
            text-align: center; color: var(--anthracite);
            font-size: clamp(1.8rem, 6vw, 3.5rem);
            z-index: 10; padding: 0 15px; box-sizing: border-box;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            pointer-events: none;
        }

        .btn {
            position: absolute;
            padding: 15px 35px;
            border-radius: 50px; /* Arrondi total */
            border: 1px solid rgba(255,255,255,0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            font-family: 'Poiret One', cursive;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: flex; align-items: center; justify-content: center;
            user-select: none;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
        @keyframes popOut { to { transform: scale(0); opacity: 0; } }

        .btn-oui { background: var(--glass-oui); color: white; z-index: 100; }
        .btn-non { background: var(--glass-non); color: var(--anthracite); z-index: 90; }

        .emoji {
            position: absolute; pointer-events: none; z-index: 1000;
            will-change: transform;
        }
    </style>
</head>
<body>

    <h1 id="main-title">Miss Plantard, <br>Voulez-Vous Me faire L'Honneur D'Etre Ma Valentine ?</h1>

    <script>
        const btns = [];
        const config = {
            numOui: 3,
            numNon: 5,
            emojiCount: 300
        };

        class Button {
            constructor(text, className, isOui) {
                this.el = document.createElement('button');
                this.el.innerText = text;
                this.el.className = `btn ${className}`;
                this.isOui = isOui;
                document.body.appendChild(this.el);

                this.rect = this.el.getBoundingClientRect();
                this.x = Math.random() * (window.innerWidth - 120);
                this.y = Math.random() * (window.innerHeight - 60);
                this.vx = (Math.random() - 0.5) * 4;
                this.vy = (Math.random() - 0.5) * 4;
                this.w = this.el.offsetWidth;
                this.h = this.el.offsetHeight;

                this.el.onclick = () => isOui ? celebrate() : this.pop();
            }

            pop() {
                this.el.style.animation = "popOut 0.3s forwards";
                setTimeout(() => {
                    this.x = Math.random() * (window.innerWidth - 120);
                    this.y = Math.random() * (window.innerHeight - 60);
                    this.el.style.animation = "popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
                }, 1000);
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;

                // Rebond bords
                if (this.x <= 0 || this.x + this.w >= window.innerWidth) this.vx *= -1;
                if (this.y <= 0 || this.y + this.h >= window.innerHeight) this.vy *= -1;

                // Collision entre boutons
                btns.forEach(other => {
                    if (other === this) return;
                    const dx = (this.x + this.w/2) - (other.x + other.w/2);
                    const dy = (this.y + this.h/2) - (other.y + other.h/2);
                    const distance = Math.sqrt(dx*dx + dy*dy);
                    if (distance < this.w/1.5) {
                        this.vx = dx * 0.05;
                        this.vy = dy * 0.05;
                    }
                });

                this.el.style.transform = `translate(${this.x}px, ${this.y}px)`;
            }
        }

        // Initialisation
        for(let i=0; i<config.numOui; i++) btns.push(new Button('Oui', 'btn-oui', true));
        for(let i=0; i<config.numNon; i++) btns.push(new Button('Non', 'btn-non', false));

        function animate() {
            btns.forEach(b => b.update());
            requestAnimationFrame(animate);
        }
        animate();

        function celebrate() {
            document.getElementById('main-title').innerText = "Je savais que tu dirais oui !";
            btns.forEach(b => b.el.style.display = 'none');

            const emojis = ['üå∏', 'üíñ', 'üåπ', '‚ú®', 'üå∑', '‚ù§Ô∏è'];
            for (let i = 0; i < config.emojiCount; i++) {
                setTimeout(() => {
                    const e = document.createElement('div');
                    e.className = 'emoji';
                    e.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                    e.style.left = Math.random() * 100 + 'vw';
                    e.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    
                    const duration = 3000 + Math.random() * 3000;
                    const startX = Math.random() * window.innerWidth;
                    
                    const animation = e.animate([
                        { transform: `translate(0, -10vh) rotate(0deg)`, opacity: 1 },
                        { transform: `translate(${Math.sin(i)*100}px, 50vh) rotate(180deg)`, opacity: 0.8 },
                        { transform: `translate(${Math.cos(i)*150}px, 110vh) rotate(360deg)`, opacity: 0 }
                    ], { duration: duration, easing: 'cubic-bezier(.37,0,.63,1)' });

                    document.body.appendChild(e);
                    animation.onfinish = () => e.remove();
                }, i * 20);
            }
        }
    </script>
</body>
</html>
